<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myEducation.inside.model.Menu">

	<sql id="table">menu</sql>
	<sql id="columns">id,title,enTitle,url,parentid,icon,status,type,remark,createtime,updatetime</sql>
	<insert id="insert">
		insert into <include refid="table"></include>(title,enTitle,url,parentid,icon,status,type,remark,createtime,updatetime)
		values(#{title},#{enTitle},#{url},#{parentId},#{icon},#{status},#{type},#{remark},#{createTime},#{updateTime})
	</insert>
	<update id="update">
		update <include refid="table"></include> 
		set name = #{name},remark=#{remark},status=#{status},flag=#{flag},updatetime=#{updateTime}
		where id = #{id}
	</update>
	<select id="getById" resultType="Menu">
		select <include refid="columns"></include> from <include refid="table"></include>
		where id = #{id}
	</select>
	<select id="getAll" resultType="Menu">
		select <include refid="columns"></include> from <include refid="table"></include>
		where status = 0
		order by id
	</select>
	<select id="getByRoleId" resultType="Menu">
		select t1.*,(select count(id) from premission where roleid = #{roleId} and menuid = t1.id) as isPre from menu t1 where t1.status = 0
	</select>
	
</mapper>